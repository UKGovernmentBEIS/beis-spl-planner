{% from "back-link/macro.njk" import govukBackLink %}
{% from "radios/macro.njk" import govukRadios %}
{% from "button/macro.njk" import govukButton %}
{% from "table/macro.njk" import govukTable %}

{% extends "layout.njk" %}

{% block pageTitle -%}
{{ "Cookies" | pageTitle }}
{%- endblock %}

{% block beforeContent %}
{{ super() }}

{{ govukBackLink({
text: "Back",
href: data.backPathForHelpPages
}) }}
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds-from-desktop">
        <h1 class="govuk-heading-l">
            Cookies
        </h1>
        <div id="cookie-preference-success">
            <div class="success-message" aria-labelledby="success-title" role="alert" tabindex="-1">
                <h2 class="govuk-heading-m">
                    Your cookie settings were saved
                </h2>
                <div>
                    <p>Government services may set additional cookies and, if so, will have their
                        own cookie policy and banner.</p>
                </div>
                <a href="/">Go to homepage</a>
            </div>
        </div>
        <p>Cookies are files saved on your phone, tablet or computer when you visit a website. Most websites need cookies to work properly.</p>
        <p>This service uses cookies to:</p>
        <ul class="govuk-list govuk-list--bullet">
            <li>measure how you use the service so it can be improved</li>
            <li>temporarily store the answers you give</li>
        </ul>
        <h2 class="govuk-heading-l">
            How cookies are used in this service
        </h2>
        <h3 class="govuk-heading-m">
            1. To measure website use
        </h3>
        <p>We use Google Analytics software to collect information about how you use this service.
           We do this to help make sure the service is meeting the needs of its users and to help us make improvements.
           We do not allow Google to use or share the data about how you use this site.</p>

        <p>Google Analytics sets cookies that store anonymised information about:</p>
        <ul class="govuk-list govuk-list--bullet">
            <li>how you got to the service</li>
            <li>the pages you visit</li>
            <li>how long you spend on each page</li>
            <li>what you click on while you're visiting the service</li>
        </ul>
        {{ govukTable({
            firstCellIsHeader: true,
            caption: 'Google Analytics cookie details',
            head: [
                {
                    text: 'Name',
                    classes: 'govuk-!-width-one-quarter'
                },
                {
                    text: 'Purpose',
                    classes: 'govuk-!-width-one-half'
                },
                {
                    text: 'Expires',
                    classes: 'govuk-!-width-one-quarter'
                }
            ],
        rows: [
            [
                {
                    text: '_ga'
                },
                {
                    text: "A randomly generated reference used to identify unique users and inform referring
                    sites, visitor and session counts"
                },
                {
                    text: '2 years'
                }
            ],
            [
                {
                    text: '_gat_UA-158688524-1'
                },
                {
                    text: 'Used to throttle request rate'
                },
                {
                    text: '1 minute'
                }
            ],
            [
                {
                    text: '_gid'
                },
                {
                    text: 'Used to distinguish users'
                },
                {
                    text: '24 hours'
                }
            ]
        ]
        }) }}

        <form id="cm_user_preference_form" class="js-show">
            {{ govukRadios({
                classes: 'govuk-radios',
                idPrefix: 'analytics',
                name: 'analytics',
                fieldset: {
                    legend: {
                        text: "Allow cookies that measure website use?",
                        classes: "govuk-fieldset__legend--s"
                    }
                },
                items: [
                    {
                        value: 'on',
                        text: 'Use cookies that measure my website use'
                    },
                    {
                        value: 'off',
                        text: 'Do not use cookies that measure my website use',
                        checked: true
            }
                ]
            }) }}
            {{ govukButton({
                text: 'Save'
            }) }}
        </form>

        <h3 class="govuk-heading-m">
            2. To store the answers you've given during your visit
        </h3>
        <p>Your visit is known as a session.
           We store session cookies on your computer to help keep your information secure and to understand what you've seen and done so far.</p>
        <p>These are temporary cookies and are automatically deleted after a period of time. These cookies always need to be on.</p>
        {{ govukTable({
            firstCellIsHeader: true,
            caption: 'Session cookie details',
            head: [
                {
                    text: 'Name',
                    classes: 'govuk-!-width-one-quarter'
                },
                {
                    text: 'Purpose',
                    classes: 'govuk-!-width-one-half'
                },
                {
                    text: 'Expires',
                    classes: 'govuk-!-width-one-quarter'
                }
            ],
        rows: [
            [
                {
                    text: 'application'
                },
                {
                    text: 'Stores a unique session id'
                },
                {
                    text: '24 hours, or when you close the browser, or after 30 minutes of inactivity'
                }
            ],
            [
                {
                    text: 'cm-user-preferences'
                },
                {
                    text: 'Stores your selection on whether or not to allow Google Analytics cookies'
                },
                {
                    text: '365 days'
                }
            ]
        ]
        }) }}
    </div>
</div>
{% endblock %}
